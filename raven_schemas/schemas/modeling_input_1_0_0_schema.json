{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "required": [
    "input_schema_version",
    "address",
    "bedroomCount",
    "buildYear",
    "buildingAreaSqFt",
    "city",
    "county",
    "energyReportSlug",
    "garageAreaSqFt",
    "latitude",
    "longitude",
    "roofAreaSqM",
    "roofMaterial",
    "roofTreeOverlapRatio",
    "state",
    "storyCount",
    "survey"
  ],
  "additionalProperties": false,
  "properties": {
    "input_schema_version": {
      "const": "1.0.0"
    },
    "address": {
      "type": "string"
    },
    "bedroomCount": {
      "type": "integer"
    },
    "buildYear": {
      "type": "integer"
    },
    "buildingAreaSqFt": {
      "type": "integer"
    },
    "city": {
      "type": "string"
    },
    "county": {
      "type": "string"
    },
    "energyReportSlug": {
      "type": "string"
    },
    "garageAreaSqFt": {
      "type": "integer"
    },
    "latitude": {
      "type": "number"
    },
    "longitude": {
      "type": "number"
    },
    "roofAreaSqM": {
      "type": "number"
    },
    "roofMaterial": {
      "type": "string",
      "$comment": "Propinc values are from 'Architectural Shingles' to 'Other'. Redfin values are from 'Tile' to 'Common Roof'.",
      "enum": [
        "Architectural Shingles",
        "Asbestos Shingles",
        "Asphalt/Composite Shingles",
        "Built-up/Tar with Gravel",
        "Built-up/Tar without Gravel",
        "Clay Tiles",
        "Concrete/Stone Tiles",
        "Fiberglass/Fiber-Cement/Masonite",
        "Metal",
        "Rolled Composition",
        "Rubber Membrane",
        "Slate",
        "Solar Shingles (Photovoltaic)",
        "Synthetic/Plastic Shingles",
        "Unspecified Shingles",
        "Wood Shakes/Shingles",
        "Other",
        "Tile",
        "Flat Tile",
        "Tile/Slate",
        "Spanish Tile",
        "Shingle",
        "Composition",
        "Concrete",
        "Bitumen",
        "Asphalt",
        "Asbestos Shingle",
        "Common Roof"
      ]
    },
    "roofTreeOverlapRatio": {
      "type": "number"
    },
    "state": {
      "type": "string"
    },
    "storyCount": {
      "type": "integer"
    },
    "survey": {
      "type": "object",
      "properties": {
        "systems": {
          "type": "object",
          "required": [
            "primary_heating",
            "cooling",
            "water_heating"
          ],
          "additionalProperties": false,
          "properties": {
            "primary_heating": {
              "type": "object",
              "required": [
                "fuel_type",
                "functional",
                "over_age",
                "furnace_vent",
                "system",
                "insulated_ducts",
                "dist_type"
              ],
              "properties": {
                "fuel_type": {
                  "type": "string",
                  "enum": [
                    "Gas",
                    "Oil",
                    "Propane",
                    "Electricity"
                  ]
                },
                "ducted_heating": {
                  "type": "boolean"
                },
                "functional": {
                  "type": "boolean"
                },
                "over_age": {
                  "type": "boolean"
                },
                "furnace_vent": {
                  "enum": [
                    "PVC",
                    "Metal",
                    null
                  ]
                },
                "system": {
                  "enum": [
                    "Ducted Heat Pump",
                    "Furnace",
                    "Boiler",
                    "Baseboard",
                    "Mini Split",
                    "Wall Furnace",
                    null
                  ]
                },
                "insulated_ducts": {
                  "enum": [
                    "Damaged/Inadequate",
                    "Adequate",
                    null
                  ]
                },
                "dist_type": {
                  "enum": [
                    "Radiator",
                    "Radiant Floor",
                    "Radiant Baseboard",
                    null
                  ]
                }
              }
            },
            "cooling": {
              "type": "object",
              "required": [
                "type",
                "over_age"
              ],
              "properties": {
                "type": {
                  "type": "string",
                  "enum": [
                    "None",
                    "Condenser",
                    "Ducted Heat Pump",
                    "Mini Split",
                    "Window Units"
                  ]
                },
                "over_age": {
                  "enum": [
                    true,
                    false,
                    null
                  ]
                }
              }
            },
            "water_heating": {
              "type": "object",
              "required": [
                "type",
                "functional",
                "over_age",
                "water_pipe_insulation"
              ],
              "additionalProperties": false,
              "properties": {
                "type": {
                  "enum": [
                    "Gas Tank",
                    "Gas Tankless",
                    "Electric Tank",
                    "Electric Tankless",
                    "Heat Pump Tank"
                  ]
                },
                "functional": {
                  "type": "boolean"
                },
                "over_age": {
                  "type": "boolean"
                },
                "water_pipe_insulation": {
                  "enum": [
                    "Damaged/Inadequate",
                    "Adequate"
                  ]
                },
                "size": {
                  "type": "string"
                }
              }
            }
          },
          "allOf": [
            {
              "$comment": "If heating is a mini split, cooling must be as well",
              "if": {
                "properties": {
                  "primary_heating": {
                    "properties": {
                      "system": {
                        "const": "Mini Split"
                      }
                    }
                  }
                }
              },
              "then": {
                "properties": {
                  "cooling": {
                    "properties": {
                      "type": {
                        "const": "Mini Split"
                      }
                    }
                  }
                }
              }
            }
          ]
        }
      }
    }
  }
}
